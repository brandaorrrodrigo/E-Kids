<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meu Mundo E-Kids ğŸŒŸ</title>
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/child.css">
</head>
<body class="child-interface">
  <div id="app">
    <!-- Header fixo -->
    <header class="child-header">
      <div class="header-left">
        <div class="mascot-icon">ğŸ¦Š</div>
        <div class="child-info">
          <h2 id="child-name">E-Kids</h2>
          <p id="mascot-greeting">Que bom te ver aqui!</p>
        </div>
      </div>
      <div class="header-right">
        <div class="fp-display">
          <span class="fp-icon">â­</span>
          <span id="total-fp">0</span> FP
        </div>
        <button class="btn-switch-child" onclick="switchChild()" title="Trocar crianÃ§a">
          <span>ğŸ‘¥</span>
        </button>
      </div>
    </header>

    <!-- Navbar Infantil -->
    <nav class="nav-kids" id="nav-kids">
      <button class="nav-btn" data-screen="screen_home">
        <span class="nav-icon">ğŸ </span>
        <span class="nav-label">InÃ­cio</span>
      </button>
      <button class="nav-btn" data-screen="screen_map">
        <span class="nav-icon">ğŸ—ºï¸</span>
        <span class="nav-label">Mapa</span>
      </button>
      <button class="nav-btn" data-screen="screen_missions">
        <span class="nav-icon">â­</span>
        <span class="nav-label">MissÃµes</span>
      </button>
      <button class="nav-btn" data-screen="screen_store">
        <span class="nav-icon">ğŸ›’</span>
        <span class="nav-label">Loja</span>
      </button>
      <button class="nav-btn" data-screen="screen_savings">
        <span class="nav-icon">ğŸ¦</span>
        <span class="nav-label">Cofrinho</span>
      </button>
      <button class="nav-btn" data-screen="screen_badges">
        <span class="nav-icon">ğŸ†</span>
        <span class="nav-label">Conquistas</span>
      </button>
      <button class="nav-btn" onclick="window.location.href='/minigames.html'">
        <span class="nav-icon">ğŸ®</span>
        <span class="nav-label">Mini-Games</span>
      </button>
    </nav>

    <!-- Main Content -->
    <main class="child-main">

      <!-- ========== SCREEN: HOME ========== -->
      <section id="screen_home" class="screen">
        <div class="home-mascot">
          <div class="mascot-big">ğŸ¦Š</div>
          <div class="mascot-level-badge" id="mascot-level-badge">
            NÃ­vel <span id="mascot-level-display">1</span>
          </div>
          <div class="mascot-message-box" id="mascot-message">
            <p>Oi! Vamos crescer juntos? ğŸ’™</p>
          </div>
        </div>

        <div class="home-stats">
          <div class="stat-card">
            <div class="stat-icon">ğŸ“…</div>
            <div class="stat-info">
              <p class="stat-label">Dias ativos</p>
              <p class="stat-value" id="active-days-count">0</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">â­</div>
            <div class="stat-info">
              <p class="stat-label">Total de FP</p>
              <p class="stat-value" id="total-fp-home">0</p>
            </div>
          </div>
        </div>

        <button class="btn-big-primary" onclick="showScreen('screen_missions')">
          COMEÃ‡AR MISSÃ•ES ğŸš€
        </button>

        <button class="btn-secondary-home" onclick="doCheckin()">
          Check-in do Dia ğŸ’™
        </button>
      </section>

      <!-- ========== SCREEN: MISSÃ•ES ========== -->
      <section id="screen_missions" class="screen">
        <div class="screen-header">
          <h2>ğŸŒŸ Escolha sua Aventura</h2>
          <p>Todas as missÃµes sÃ£o opcionais e divertidas!</p>
        </div>

        <div class="modules-grid" id="modules-grid">
          <!-- Carregado via JS -->
        </div>
      </section>

      <!-- ========== SCREEN: MAPA DO MUNDO ========== -->
      <section id="screen_map" class="screen">
        <div class="screen-header">
          <h2>ğŸ—ºï¸ Mapa do Mundo</h2>
          <p>Explore diferentes Ã¡reas e veja seu progresso!</p>
        </div>

        <div class="phases-selector" id="phases-selector">
          <!-- Fases serÃ£o carregadas aqui -->
        </div>

        <div class="map-areas" id="map-areas">
          <!-- Ãreas serÃ£o carregadas aqui -->
        </div>
      </section>

      <!-- ========== SCREEN: LOJA FP ========== -->
      <section id="screen_store" class="screen">
        <div class="screen-header">
          <h2>ğŸ›’ Loja FP</h2>
          <p>Use seus FP para comprar itens incrÃ­veis!</p>
          <p class="store-balance">Seu saldo: <span id="store-fp-balance">0</span> FP â­</p>
        </div>

        <div class="store-tabs">
          <button class="store-tab active" onclick="filterStoreByType('all')">Tudo</button>
          <button class="store-tab" onclick="filterStoreByType('panel')">PainÃ©is</button>
          <button class="store-tab" onclick="filterStoreByType('skin')">Skins</button>
          <button class="store-tab" onclick="filterStoreByType('accessory')">AcessÃ³rios</button>
        </div>

        <div class="store-items-grid" id="store-items-grid">
          <!-- Itens da loja serÃ£o carregados aqui -->
        </div>

        <div class="inventory-section" style="margin-top: 40px;">
          <h3>ğŸ’ Meu InventÃ¡rio</h3>
          <div class="inventory-grid" id="inventory-grid">
            <!-- InventÃ¡rio serÃ¡ carregado aqui -->
          </div>
        </div>
      </section>

      <!-- ========== SCREEN: MÃ“DULO (EXECUÃ‡ÃƒO) ========== -->
      <section id="screen_module" class="screen">
        <div class="module-container">
          <button class="btn-back" onclick="showScreen('screen_missions')">â† Voltar</button>

          <div class="module-header">
            <div class="module-icon" id="module-icon">ğŸ¯</div>
            <h2 id="module-title">Carregando...</h2>
          </div>

          <div class="module-story" id="module-story">
            <p>Carregando histÃ³ria...</p>
          </div>

          <div class="module-question" id="module-question-section" style="display: none;">
            <h3 id="module-question-text">Pergunta...</h3>
            <div class="choices-grid" id="choices-grid">
              <!-- BotÃµes de escolha gerados via JS -->
            </div>
          </div>

          <div class="module-feedback" id="module-feedback" style="display: none;">
            <p id="feedback-text"></p>
            <button class="btn-primary" onclick="completeModule()">Concluir e Ganhar FP! â­</button>
          </div>
        </div>
      </section>

      <!-- ========== SCREEN: BADGES ========== -->
      <section id="screen_badges" class="screen">
        <div class="screen-header">
          <h2>ğŸ† Minhas Conquistas</h2>
          <p>Cada passo que vocÃª dÃ¡ Ã© uma vitÃ³ria!</p>
        </div>

        <div class="badges-container">
          <p class="no-badges-yet" id="no-badges-text">Continue explorando para ganhar conquistas especiais! âœ¨</p>
          <div class="badges-grid" id="badges-grid"></div>
        </div>
      </section>

      <!-- ========== SCREEN: COFRINHO ========== -->
      <section id="screen_savings" class="screen">
        <div class="screen-header">
          <h2>ğŸ¦ Meu Cofrinho</h2>
          <p>Quem guarda um pouquinho, ganha um pouquinho a mais!</p>
        </div>

        <div class="savings-container">
          <div class="savings-balance">
            <p class="savings-label">Guardado:</p>
            <p class="savings-amount" id="cofrinho-saved">0 FP</p>
          </div>

          <div class="savings-yield" id="cofrinho-yield-section" style="display: none;">
            <p class="yield-text">ğŸ’° Rendimento disponÃ­vel: <span id="pending-yield">0 FP</span></p>
            <button onclick="claimYield()" class="btn-yield">Receber! ğŸ‰</button>
          </div>

          <div class="savings-actions">
            <button onclick="openDepositModal()" class="btn-deposit">Guardar FP ğŸ’µ</button>
            <button onclick="openWithdrawModal()" class="btn-withdraw">Retirar FP ğŸ’°</button>
          </div>

          <div class="savings-hint">
            <p>ğŸ’¡ Seu FP rende todo mÃªs quando vocÃª guarda aqui!</p>
          </div>
        </div>
      </section>

      <!-- ========== SCREEN: PERFIL ========== -->
      <section id="screen_profile" class="screen">
        <div class="screen-header">
          <h2>ğŸ‘§ Meu Perfil</h2>
        </div>

        <div class="profile-container" id="profile-container">
          <!-- Se nÃ£o houver crianÃ§a, mostrar criaÃ§Ã£o -->
          <div class="profile-create" id="profile-create" style="display: none;">
            <h3>Vamos comeÃ§ar! ğŸŒŸ</h3>
            <p>Qual Ã© o seu nome?</p>
            <input type="text" id="profile-name" placeholder="Seu nome aqui" maxlength="20" />

            <p>Quantos anos vocÃª tem?</p>
            <input type="number" id="profile-age" min="6" max="12" placeholder="Sua idade" />

            <p>Escolha seu avatar:</p>
            <div class="avatar-picker">
              <button class="avatar-btn" data-avatar="ğŸ˜Š" onclick="selectAvatar('ğŸ˜Š')">ğŸ˜Š</button>
              <button class="avatar-btn" data-avatar="ğŸ¦Š" onclick="selectAvatar('ğŸ¦Š')">ğŸ¦Š</button>
              <button class="avatar-btn" data-avatar="ğŸ±" onclick="selectAvatar('ğŸ±')">ğŸ±</button>
              <button class="avatar-btn" data-avatar="ğŸ¦„" onclick="selectAvatar('ğŸ¦„')">ğŸ¦„</button>
              <button class="avatar-btn" data-avatar="ğŸŒˆ" onclick="selectAvatar('ğŸŒˆ')">ğŸŒˆ</button>
              <button class="avatar-btn" data-avatar="â­" onclick="selectAvatar('â­')">â­</button>
            </div>
            <input type="hidden" id="selected-avatar" value="ğŸ˜Š" />

            <button class="btn-primary" onclick="createProfile()">ComeÃ§ar! ğŸš€</button>
          </div>

          <!-- Se houver crianÃ§a, mostrar dados -->
          <div class="profile-display" id="profile-display" style="display: none;">
            <div class="profile-avatar" id="profile-avatar-display">ğŸ˜Š</div>
            <h3 id="profile-name-display">Nome</h3>
            <p id="profile-age-display">Idade anos</p>

            <div class="profile-stats">
              <div class="profile-stat">
                <p class="stat-label">Total de FP</p>
                <p class="stat-value" id="profile-fp">0</p>
              </div>
              <div class="profile-stat">
                <p class="stat-label">Dias Ativos</p>
                <p class="stat-value" id="profile-days">0</p>
              </div>
              <div class="profile-stat">
                <p class="stat-label">Conquistas</p>
                <p class="stat-value" id="profile-badges">0</p>
              </div>
            </div>

            <button class="btn-secondary" onclick="resetProfile()">Trocar de Perfil</button>
          </div>
        </div>
      </section>

    </main>
  </div>

  <!-- Modal Depositar -->
  <div id="deposit-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <h2>Guardar FP no Cofrinho ğŸ’µ</h2>
      <p>Quanto vocÃª quer guardar?</p>
      <input type="number" id="deposit-amount" min="1" placeholder="Quantidade de FP" />
      <p class="modal-hint">Seu FP atual: <span id="current-fp-deposit">0</span></p>
      <div class="modal-actions">
        <button onclick="depositFP()" class="btn-primary">Guardar</button>
        <button onclick="closeDepositModal()" class="btn-secondary">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- Modal Retirar -->
  <div id="withdraw-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <h2>Retirar FP do Cofrinho ğŸ’°</h2>
      <p>Quanto vocÃª quer retirar?</p>
      <input type="number" id="withdraw-amount" min="1" placeholder="Quantidade de FP" />
      <p class="modal-hint">No cofrinho: <span id="current-savings-withdraw">0</span> FP</p>
      <div class="modal-actions">
        <button onclick="withdrawFP()" class="btn-primary">Retirar</button>
        <button onclick="closeWithdrawModal()" class="btn-secondary">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- Popup de FP Ganho -->
  <div id="fp-popup" class="fp-popup" style="display: none;">
    <div class="fp-popup-content">
      <div class="fp-popup-icon">â­</div>
      <p class="fp-popup-text" id="fp-popup-text">+10 FP</p>
    </div>
  </div>

  <script src="/js/child.js"></script>
</body>
</html>
